(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.svgKnob=b():a.svgKnob=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.default=function(a){function b(){var a=Math.acos;c.center_zero&&!c.center_value&&(c.center_value=d((c.value_max-c.value_min)/2+c.value_min)),h(c.initial_value?c.initial_value:c.default_value),'butt'===c.linecap?(Y=l(180*a(-c.center_gap/100)/G),Z=l(180*a(c.center_gap/100)/G)):(Y=l(180*a(-(1.3*c.track_width+c.center_gap)/100)/G),Z=l(180*a((1.3*c.track_width+c.center_gap)/100)/G))}function d(a){return null===c.value_resolution?a:Math.round(a/c.value_resolution)*c.value_resolution}function f(a){var b=g(a);return c.format(b)}function g(b){var a=void 0===b?_:b,e=(a-c.angle_min)/(c.angle_max-c.angle_min)*(c.value_max-c.value_min)+c.value_min;return d(e)}function h(a){return $=a<c.value_min?c.value_min:a>c.value_max?c.value_max:a,i((a-c.value_min)/(c.value_max-c.value_min)*(c.angle_max-c.angle_min)+c.angle_min),!0}function i(a,b){var d=_,e=b&&a!==_;_=E(F(a,c.angle_min),c.angle_max),e&&g(d)!==g()&&r()}function j(a){i(E(F(_+a,c.angle_min),c.angle_max),!0)}function k(b){var d=c.zero_at-b;return 0>d&&(d+=360),d}function l(a){return(c.zero_at-a+360)%360}function m(a){var b=a.clientX-U.left,d=a.clientY-U.top,e=(b-W)/(U.width/2),f=-(d-X)/(U.width/2);c.rotation===M&&(e=-e);var g=Math.atan2(f,e);0>g&&(g=2*G+g),i(l(180*g/G),!0)}function n(a){a.preventDefault(),U=I.getBoundingClientRect(),W=U.width/2,X=W,document.addEventListener('mousemove',o,!1),document.addEventListener('mouseup',p,!1),m(a),D()}function o(a){a.preventDefault(),m(a),D()}function p(){document.removeEventListener('mousemove',o,!1),document.removeEventListener('mouseup',p,!1)}function q(a){var b=Math.abs;a.preventDefault();var d=a.deltaY;return 0!==d&&(V>b(d)||!V)&&(V=b(d)),j(d/V*aa*c.mouse_wheel_acceleration),D(),!1}function r(){var b=g(),d=new CustomEvent('change',{detail:b});a.dispatchEvent(d),c.onchange&&c.onchange(b)}function s(b,d){var e=b*G/180,a=void 0===d?c.track_radius:d,f=Math.cos(e)*a,g=Math.sin(e)*a;return{x:c.rotation===L?N+f:N-f,y:O-g}}function t(a,b,d){var e=k(a),f=k(b);a!==b&&(e-=1e-4,f+=1e-4);var g=s(e,d),h=g.x,i=g.y,j=s(f,d),l=j.x,m=j.y,n=(e-f+360)%360,o=180>n?0:1,p=c.rotation===L?1:0;return'M '+h+','+i+' A '+d+','+d+' 0 '+o+','+p+' '+l+','+m}function u(){var a=null;if(c.center_zero){if(g()===c.center_value)return a;180>_?a=t(E(_,Y),Y,c.track_radius):180<_&&(a=t(Z,F(_,Z),c.track_radius))}else a=t(c.angle_min,_,c.track_radius);return a}function v(){c.bg&&(ba=document.createElementNS(K,'circle'),ba.setAttributeNS(null,'cx',''+N),ba.setAttributeNS(null,'cy',''+O),ba.setAttributeNS(null,'r',''+c.bg_radius),ba.setAttribute('fill',''+c.bg_color),ba.setAttribute('stroke',''+c.bg_border_color),ba.setAttribute('stroke-width',''+c.bg_border_width),ba.setAttribute('class',c.class_bg),I.appendChild(ba))}function w(){if(c.markers){for(var b='',d=(c.angle_max-c.angle_min)/c.markers,e=c.angle_min;e<=c.angle_max;e+=d){var a=s(k(e),c.markers_radius),f=s(k(e),c.markers_radius+c.markers_length);b+='M '+a.x+','+a.y+' L '+f.x+','+f.y+' '}ha=document.createElementNS(K,'path'),ha.setAttributeNS(null,'d',b),ha.setAttribute('stroke',''+c.markers_color),ha.setAttribute('stroke-width',''+c.markers_width),ha.setAttribute('stroke-linecap',c.linecap),ha.setAttribute('class',c.class_markers),I.appendChild(ha)}}function x(){c.track_bg&&(c.center_zero?(da=document.createElementNS(K,'path'),da.setAttributeNS(null,'d',t(c.angle_min,Y,c.track_bg_radius)),da.setAttribute('stroke',''+c.track_bg_color),da.setAttribute('stroke-width',''+c.track_bg_width),da.setAttribute('stroke-linecap',c.linecap),da.setAttribute('fill','transparent'),da.setAttribute('class',c.class_track_bg),I.appendChild(da),ea=document.createElementNS(K,'path'),ea.setAttributeNS(null,'d',t(Z,c.angle_max,c.track_bg_radius)),ea.setAttribute('stroke',''+c.track_bg_color),ea.setAttribute('stroke-width',''+c.track_bg_width),ea.setAttribute('stroke-linecap',c.linecap),ea.setAttribute('fill','transparent'),ea.setAttribute('class',c.class_track_bg),I.appendChild(ea)):(ca=document.createElementNS(K,'path'),ca.setAttributeNS(null,'d',t(c.angle_min,c.angle_max,c.track_bg_radius)),ca.setAttribute('stroke',''+c.track_bg_color),ca.setAttribute('stroke-width',''+c.track_bg_width),ca.setAttribute('fill','transparent'),ca.setAttribute('stroke-linecap',c.linecap),ca.setAttribute('class',c.class_track_bg),I.appendChild(ca)))}function y(){if(c.track){var a=u();a&&(fa=document.createElementNS(K,'path'),fa.setAttributeNS(null,'d',a),fa.setAttribute('stroke',''+c.track_color_init),fa.setAttribute('stroke-width',''+c.track_width),fa.setAttribute('fill','transparent'),fa.setAttribute('stroke-linecap',c.linecap),fa.setAttribute('class',c.class_track),I.appendChild(fa))}}function z(){var b=k(_),a=s(b,c.cursor_radius),d=s(b,c.cursor_radius+c.cursor_length);return'M '+a.x+','+a.y+' L '+d.x+','+d.y}function A(){if(c.cursor){var a=z();a&&(ga=document.createElementNS(K,'path'),ga.setAttributeNS(null,'d',a),ga.setAttribute('stroke',''+c.cursor_color_init),ga.setAttribute('stroke-width',''+c.cursor_width),ga.setAttribute('fill','transparent'),ga.setAttribute('stroke-linecap',c.linecap),ga.setAttribute('class',c.class_cursor),I.appendChild(ga))}}function B(){c.value_text&&(ia=document.createElementNS(K,'text'),ia.setAttributeNS(null,'x',''+N),ia.setAttributeNS(null,'y',''+c.value_position),ia.setAttribute('text-anchor','middle'),ia.setAttribute('cursor','default'),ia.setAttribute('font-family',c.font_family),ia.setAttribute('font-size',''+c.font_size),ia.setAttribute('font-weight',''+c.font_weight),ia.setAttribute('fill',c.font_color),ia.setAttribute('class',c.class_value),ia.textContent=f(),I.appendChild(ia))}function C(){v(),x(),w(),y(),A(),B()}function D(){var a=u();a?fa?fa.setAttributeNS(null,'d',a):y():fa&&fa.setAttributeNS(null,'d',''),ja||(ja=g()!==c.default_value,ja&&fa&&fa.setAttribute('stroke',''+c.track_color)),a=z(),a&&ga&&(ga.setAttributeNS(null,'d',a),ja&&ga.setAttribute('stroke',''+c.cursor_color)),ia&&(ia.textContent=f())}var E=Math.min,F=Math.max,G=Math.PI,H=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!a)throw'You must pass a DOM node reference to the Knob constructor';var I,J=!1,K='http://www.w3.org/2000/svg',L=!0,M=!L,N=50,O=50;('string'==typeof a||a instanceof String)&&(a=document.querySelector(a)),'svg'===a.nodeName.toLowerCase()?I=a:(I=document.createElementNS('http://www.w3.org/2000/svg','svg'),a.appendChild(I));var P,Q=void 0!==a.dataset.label&&a.dataset.label,R={label:!1,rotation:L,default_value:0,initial_value:0,value_min:0,value_max:100,value_resolution:1,center_zero:!1,center_value:null,center_gap:4,zero_at:270,angle_min:30,angle_max:330,bg_radius:32,bg_border_width:1,track_bg_radius:40,track_bg_width:8,track_radius:40,track_width:8,cursor_radius:18,cursor_length:10,cursor_width:4,palette:'light',bg:!1,track_bg:!0,track:!0,cursor:!1,linecap:'butt',value_text:!0,value_position:O+8,format:function(a){return a},font_family:'sans-serif',font_size:25,font_weight:'bold',markers:0,markers_radius:40,markers_length:8,markers_width:2,class_bg:'knob-bg',class_track_bg:'knob-track-bg',class_track:'knob-track',class_value:'knob-value',class_cursor:'knob-cursor',class_markers:'knob-markers',snap_to_steps:!1,mouse_wheel_acceleration:1,onchange:null},S=JSON.parse(a.dataset.config||'{}'),T=Object.assign({},R,e.default[R.palette],H,S),c=Object.assign(T,e.default[T.palette],H,S);P=c.label||c.value_position>=100-c.font_size/2?120:100,I.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),I.setAttributeNS(null,'viewBox','0 0 '+100+' '+P);var U,V,W=0,X=0,Y=0,Z=0,$=0,_=c.angle_min,aa=1,ba=null,ca=null,da=null,ea=null,fa=null,ga=null,ha=null,ia=null,ja=!1;return b(),C(),function(){I.addEventListener('mousedown',function(a){n(a)}),I.addEventListener('wheel',function(a){q(a)})}(),{set value(a){h(a),D()},set config(a){c=Object.assign({},R,H,a),b(),C()},enableDebug:function(){J=!0},disableDebug:function(){J=!1}}};var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d)},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.default={light:{bg_color:'#E0E0E0',bg_border_color:'#BDBDBD',track_bg_color:'#CFD8DC',track_color_init:'#64B5F6',track_color:'#42A5F5',cursor_color_init:'#64B5F6',cursor_color:'#42A5F5',markers_color:'#9E9E9E',font_color:'#424242'},light2:{bg_color:'#B1DAEE',bg_border_color:'#569DC0',track_bg_color:'#B1DAEE',track_color_init:'#569DC0',track_color:'#1D6D93',cursor_color_init:'#569DC0',cursor_color:'#1D6D93',markers_color:'#3680A4',font_color:'#1D6D93'},dark:{bg_color:'#000000',bg_border_color:'#569DC0',track_bg_color:'#424242',track_color_init:'#FDD835',track_color:'#FFEC00',cursor_color_init:'#569DC0',cursor_color:'#FDD835',markers_color:'#3680A4',font_color:'#FFEA00'}}}])});