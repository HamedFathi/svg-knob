(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.svgKnob=b():a.svgKnob=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(1);b['default']=function(a,b={}){function e(){var a=Math.acos;c.center_zero&&!c.center_value&&(c.center_value=f((c.value_max-c.value_min)/2+c.value_min)),i(c.initial_value?c.initial_value:c.default_value),'butt'===c.linecap?(Y=m(180*a(-c.center_gap/100)/H),Z=m(180*a(c.center_gap/100)/H)):(Y=m(180*a(-(1.3*c.track_width+c.center_gap)/100)/H),Z=m(180*a((1.3*c.track_width+c.center_gap)/100)/H))}function f(a){return null===c.value_resolution?a:Math.round(a/c.value_resolution)*c.value_resolution}function g(a){let b=h(a);return c.format(b)}function h(b){let a=void 0===b?_:b,d=(a-c.angle_min)/(c.angle_max-c.angle_min)*(c.value_max-c.value_min)+c.value_min;return f(d)}function i(a){return $=a<c.value_min?c.value_min:a>c.value_max?c.value_max:a,j((a-c.value_min)/(c.value_max-c.value_min)*(c.angle_max-c.angle_min)+c.angle_min),!0}function j(a,b){let d=_,e=b&&a!==_;_=F(G(a,c.angle_min),c.angle_max),e&&h(d)!==h()&&s()}function k(a){j(F(G(_+a,c.angle_min),c.angle_max),!0)}function l(b){let d=c.zero_at-b;return 0>d&&(d+=360),d}function m(a){return(c.zero_at-a+360)%360}function n(a){let b=a.clientX-U.left,d=a.clientY-U.top,e=(b-W)/(U.width/2),f=-(d-X)/(U.width/2);c.rotation===L&&(e=-e);let g=Math.atan2(f,e);0>g&&(g=2*H+g),j(m(180*g/H),!0)}function o(a){a.preventDefault(),U=O.getBoundingClientRect(),W=U.width/2,X=W,document.addEventListener('mousemove',p,!1),document.addEventListener('mouseup',q,!1),n(a),E()}function p(a){a.preventDefault(),n(a),E()}function q(){document.removeEventListener('mousemove',p,!1),document.removeEventListener('mouseup',q,!1)}function r(a){var b=Math.abs;a.preventDefault();let d=a.deltaY;return 0!==d&&(V>b(d)||!V)&&(V=b(d)),k(d/V*aa*c.mouse_wheel_acceleration),E(),!1}function s(){let b=h(),d=new CustomEvent('change',{detail:b});a.dispatchEvent(d),c.onchange&&c.onchange(b)}function t(b,d){let e=b*H/180,a=void 0===d?c.track_radius:d,f=Math.cos(e)*a,g=Math.sin(e)*a;return{x:c.rotation===K?M+f:M-f,y:N-g}}function u(a,b,d){let e=l(a),f=l(b);a!==b&&(e-=1e-4,f+=1e-4);let{x:g,y:h}=t(e,d),{x:i,y:j}=t(f,d),k=(e-f+360)%360,m=180>k?0:1,n=c.rotation===K?1:0,o=`M ${g},${h} A ${d},${d} 0 ${m},${n} ${i},${j}`;return o}function v(){let a=null;if(c.center_zero){if(h()===c.center_value)return a;180>_?a=u(F(_,Y),Y,c.track_radius):180<_&&(a=u(Z,G(_,Z),c.track_radius))}else a=u(c.angle_min,_,c.track_radius);return a}function w(){c.bg&&(ba=document.createElementNS(J,'circle'),ba.setAttributeNS(null,'cx',`${M}`),ba.setAttributeNS(null,'cy',`${N}`),ba.setAttributeNS(null,'r',`${c.bg_radius}`),ba.setAttribute('fill',`${c.bg_color}`),ba.setAttribute('stroke',`${c.bg_border_color}`),ba.setAttribute('stroke-width',`${c.bg_border_width}`),ba.setAttribute('class',c.class_bg),O.appendChild(ba))}function x(){if(!c.markers)return;let b='',d=(c.angle_max-c.angle_min)/c.markers;for(let e=c.angle_min;e<=c.angle_max;e+=d){let a=t(l(e),c.markers_radius),d=t(l(e),c.markers_radius+c.markers_length);b+=`M ${a.x},${a.y} L ${d.x},${d.y} `}ha=document.createElementNS(J,'path'),ha.setAttributeNS(null,'d',b),ha.setAttribute('stroke',`${c.markers_color}`),ha.setAttribute('stroke-width',`${c.markers_width}`),ha.setAttribute('stroke-linecap',c.linecap),ha.setAttribute('class',c.class_markers),O.appendChild(ha)}function y(){c.track_bg&&(c.center_zero?(da=document.createElementNS(J,'path'),da.setAttributeNS(null,'d',u(c.angle_min,Y,c.track_bg_radius)),da.setAttribute('stroke',`${c.track_bg_color}`),da.setAttribute('stroke-width',`${c.track_bg_width}`),da.setAttribute('stroke-linecap',c.linecap),da.setAttribute('fill','transparent'),da.setAttribute('class',c.class_track_bg),O.appendChild(da),ea=document.createElementNS(J,'path'),ea.setAttributeNS(null,'d',u(Z,c.angle_max,c.track_bg_radius)),ea.setAttribute('stroke',`${c.track_bg_color}`),ea.setAttribute('stroke-width',`${c.track_bg_width}`),ea.setAttribute('stroke-linecap',c.linecap),ea.setAttribute('fill','transparent'),ea.setAttribute('class',c.class_track_bg),O.appendChild(ea)):(ca=document.createElementNS(J,'path'),ca.setAttributeNS(null,'d',u(c.angle_min,c.angle_max,c.track_bg_radius)),ca.setAttribute('stroke',`${c.track_bg_color}`),ca.setAttribute('stroke-width',`${c.track_bg_width}`),ca.setAttribute('fill','transparent'),ca.setAttribute('stroke-linecap',c.linecap),ca.setAttribute('class',c.class_track_bg),O.appendChild(ca)))}function z(){if(c.track){let a=v();a&&(fa=document.createElementNS(J,'path'),fa.setAttributeNS(null,'d',a),fa.setAttribute('stroke',`${c.track_color_init}`),fa.setAttribute('stroke-width',`${c.track_width}`),fa.setAttribute('fill','transparent'),fa.setAttribute('stroke-linecap',c.linecap),fa.setAttribute('class',c.class_track),O.appendChild(fa))}}function A(){let b=l(_),a=t(b,c.cursor_radius),d=t(b,c.cursor_radius+c.cursor_length);return`M ${a.x},${a.y} L ${d.x},${d.y}`}function B(){if(c.cursor){let a=A();a&&(ga=document.createElementNS(J,'path'),ga.setAttributeNS(null,'d',a),ga.setAttribute('stroke',`${c.cursor_color_init}`),ga.setAttribute('stroke-width',`${c.cursor_width}`),ga.setAttribute('fill','transparent'),ga.setAttribute('stroke-linecap',c.linecap),ga.setAttribute('class',c.class_cursor),O.appendChild(ga))}}function C(){c.value_text&&(ia=document.createElementNS(J,'text'),ia.setAttributeNS(null,'x',`${M}`),ia.setAttributeNS(null,'y',`${c.value_position}`),ia.setAttribute('text-anchor','middle'),ia.setAttribute('cursor','default'),ia.setAttribute('font-family',c.font_family),ia.setAttribute('font-size',`${c.font_size}`),ia.setAttribute('font-weight',`${c.font_weight}`),ia.setAttribute('fill',c.font_color),ia.setAttribute('class',c.class_value),ia.textContent=g(),O.appendChild(ia))}function D(){w(),y(),x(),z(),B(),C()}function E(){let a=v();a?fa?fa.setAttributeNS(null,'d',a):z():fa&&fa.setAttributeNS(null,'d',''),ja||(ja=h()!==c.default_value,ja&&fa&&fa.setAttribute('stroke',`${c.track_color}`)),a=A(),a&&ga&&(ga.setAttributeNS(null,'d',a),ja&&ga.setAttribute('stroke',`${c.cursor_color}`)),ia&&(ia.textContent=g())}var F=Math.min,G=Math.max,H=Math.PI;if(!a)throw'You must pass a DOM node reference to the Knob constructor';let I=!1;const J='http://www.w3.org/2000/svg',K=!0,L=!K,M=50,N=50;let O;('string'==typeof a||a instanceof String)&&(a=document.querySelector(a)),'svg'===a.nodeName.toLowerCase()?O=a:(O=document.createElementNS('http://www.w3.org/2000/svg','svg'),a.appendChild(O));let P,Q=void 0!==a.dataset.label&&a.dataset.label,R={label:!1,rotation:K,default_value:0,initial_value:0,value_min:0,value_max:100,value_resolution:1,center_zero:!1,center_value:null,center_gap:4,zero_at:270,angle_min:30,angle_max:330,bg_radius:32,bg_border_width:1,track_bg_radius:40,track_bg_width:8,track_radius:40,track_width:8,cursor_radius:18,cursor_length:10,cursor_width:4,palette:'light',bg:!1,track_bg:!0,track:!0,cursor:!1,linecap:'butt',value_text:!0,value_position:N+8,format:(a)=>a,font_family:'sans-serif',font_size:25,font_weight:'bold',markers:0,markers_radius:40,markers_length:8,markers_width:2,class_bg:'knob-bg',class_track_bg:'knob-track-bg',class_track:'knob-track',class_value:'knob-value',class_cursor:'knob-cursor',class_markers:'knob-markers',snap_to_steps:!1,mouse_wheel_acceleration:1,onchange:null},S=JSON.parse(a.dataset.config||'{}'),T=Object.assign({},R,d.a[R.palette],b,S),c=Object.assign(T,d.a[T.palette],b,S);P=c.label||c.value_position>=100-c.font_size/2?120:100,O.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),O.setAttributeNS(null,'viewBox',`0 0 ${100} ${P}`);let U,V,W=0,X=0,Y=0,Z=0,$=0,_=c.angle_min,aa=1,ba=null,ca=null,da=null,ea=null,fa=null,ga=null,ha=null,ia=null,ja=!1;return e(),D(),function(){O.addEventListener('mousedown',function(a){o(a)}),O.addEventListener('wheel',function(a){r(a)})}(),{set value(a){i(a),E()},set config(a){c=Object.assign({},R,b,a),e(),D()},enableDebug:function(){I=!0},disableDebug:function(){I=!1}}}},function(a,b){'use strict';b.a={light:{bg_color:'#E0E0E0',bg_border_color:'#BDBDBD',track_bg_color:'#CFD8DC',track_color_init:'#64B5F6',track_color:'#42A5F5',cursor_color_init:'#64B5F6',cursor_color:'#42A5F5',markers_color:'#9E9E9E',font_color:'#424242'},light2:{bg_color:'#B1DAEE',bg_border_color:'#569DC0',track_bg_color:'#B1DAEE',track_color_init:'#569DC0',track_color:'#1D6D93',cursor_color_init:'#569DC0',cursor_color:'#1D6D93',markers_color:'#3680A4',font_color:'#1D6D93'},dark:{bg_color:'#000000',bg_border_color:'#569DC0',track_bg_color:'#424242',track_color_init:'#FDD835',track_color:'#FFEC00',cursor_color_init:'#569DC0',cursor_color:'#FDD835',markers_color:'#3680A4',font_color:'#FFEA00'}}}])});