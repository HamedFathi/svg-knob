!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.svgKnob=e():t.svgKnob=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={light:{bg_color:"#E0E0E0",bg_border_color:"#BDBDBD",track_bg_color:"#CFD8DC",track_color_init:"#64B5F6",track_color:"#42A5F5",cursor_color_init:"#64B5F6",cursor_color:"#42A5F5",markers_color:"#9E9E9E",font_color:"#424242"},light2:{bg_color:"#B1DAEE",bg_border_color:"#569DC0",track_bg_color:"#B1DAEE",track_color_init:"#569DC0",track_color:"#1D6D93",cursor_color_init:"#569DC0",cursor_color:"#1D6D93",markers_color:"#3680A4",font_color:"#1D6D93"},dark:{bg_color:"#000000",bg_border_color:"#569DC0",track_bg_color:"#424242",track_color_init:"#FDD835",track_color:"#FFEC00",cursor_color_init:"#569DC0",cursor_color:"#FDD835",markers_color:"#3680A4",font_color:"#FFEA00"}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw"You must pass a DOM node reference to the Knob constructor";var r="http://www.w3.org/2000/svg",n=!0,a=!n,i=50,u=50,l=void 0;("string"==typeof t||t instanceof String)&&(t=document.querySelector(t)),"svg"===t.nodeName.toLowerCase()?l=t:(l=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.appendChild(l));void 0!==t.dataset.label&&t.dataset.label;var s={label:!1,rotation:n,default_value:0,initial_value:0,value_min:0,value_max:100,value_resolution:1,center_zero:!1,center_value:null,center_gap:4,zero_at:270,angle_min:30,angle_max:330,bg_radius:32,bg_border_width:1,track_bg_radius:40,track_bg_width:8,track_radius:40,track_width:8,cursor_radius:18,cursor_length:10,cursor_width:4,palette:"light",bg:!1,track_bg:!0,track:!0,cursor:!1,linecap:"butt",value_text:!0,value_position:u+8,font_family:"sans-serif",font_size:25,display_raw:!1,format_raw:function(t){return Math.round(t)},format:function(t){return t},font_weight:"bold",markers:0,markers_radius:40,markers_length:8,markers_width:2,class_bg:"knob-bg",class_track_bg:"knob-track-bg",class_track:"knob-track",class_value:"knob-value",class_cursor:"knob-cursor",class_markers:"knob-markers",snap_to_steps:!1,mouse_wheel_acceleration:1,onchange:null},c=JSON.parse(t.dataset.config||"{}"),_=Object.assign({},s,o.default[s.palette],e,c),d=Object.assign(_,o.default[_.palette],e,c),b=void 0;b=d.label||d.value_position>=100-d.font_size/2?120:100,l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttributeNS(null,"viewBox","0 0 100 "+b);var f=0,m=0,v=0,g=0,h=d.angle_min,p=1,k=null,A=null,w=null,x=null,M=null,E=null,D=null,y=null,S=void 0,N=void 0,C=!1;function L(){d.center_zero&&(d.center_value||(d.center_value=j((d.value_max-d.value_min)/2+d.value_min))),"butt"===d.linecap?(v=K(180*Math.acos(-d.center_gap/100)/Math.PI),g=K(180*Math.acos(d.center_gap/100)/Math.PI)):(v=K(180*Math.acos(-(1.3*d.track_width+d.center_gap)/100)/Math.PI),g=K(180*Math.acos((1.3*d.track_width+d.center_gap)/100)/Math.PI))}function P(){B(d.initial_value?d.initial_value:d.default_value)}function j(t){return null===d.value_resolution?t:Math.round(t/d.value_resolution)*d.value_resolution}function z(t){var e=O(t);return d.display_raw?d.format_raw(e):d.format(e)}function F(){var t;return t=Math.abs(d.value_max-d.value_min),1===Math.abs(t%2)?.5:0}function O(t){return j(((void 0===t?h:t)-d.angle_min)/(d.angle_max-d.angle_min)*(d.value_max-d.value_min)+d.value_min-F())}function B(t){return t<d.value_min?d.value_min:t>d.value_max?d.value_max:t,I((t+F()-d.value_min)/(d.value_max-d.value_min)*(d.angle_max-d.angle_min)+d.angle_min),!0}function I(e,r){var n=h,a=r&&e!==h;h=Math.min(Math.max(e,d.angle_min),d.angle_max),a&&O(n)!==O()&&function(){var e=O(),r=new CustomEvent("change",{detail:e});t.dispatchEvent(r),d.onchange&&d.onchange(e)}()}function Y(t){var e=d.zero_at-t;return e<0&&(e+=360),e}function K(t){return(d.zero_at-t+360)%360}function R(t){var e=t.clientX-S.left,r=t.clientY-S.top,n=(e-f)/(S.width/2),o=-(r-m)/(S.width/2);d.rotation===a&&(n=-n);var i=Math.atan2(o,n);i<0&&(i=2*Math.PI+i),I(K(180*i/Math.PI),!0)}function V(t){t.preventDefault(),R(t),Z()}function X(){document.removeEventListener("mousemove",V,!1),document.removeEventListener("mouseup",X,!1)}function q(t){t.preventDefault(),S=l.getBoundingClientRect(),f=S.width/2,m=f,document.addEventListener("touchmove",J,{passive:!1}),document.addEventListener("touchend",G)}function J(t){t.preventDefault();var e=t.touches.length-1,r=t.touches[e].clientX-S.left,n=t.touches[e].clientY-S.top,o=(r-f)/(S.width/2),i=-(n-m)/(S.width/2);d.rotation===a&&(o=-o);var u=Math.atan2(i,o);u<0&&(u=2*Math.PI+u),I(K(180*u/Math.PI),!0),Z()}function G(){document.removeEventListener("touchmove",J),document.removeEventListener("touchend",G)}function H(t,e){var r=t*Math.PI/180,a=void 0===e?d.track_radius:e,o=Math.cos(r)*a,l=Math.sin(r)*a;return{x:d.rotation===n?i+o:i-o,y:u-l}}function Q(t,e,r){var a=Y(t),o=Y(e);t!==e&&(a-=1e-4,o+=1e-4);var i=H(a,r),u=i.x,l=i.y,s=H(o,r),c=s.x,_=s.y,b="M "+u+","+l+" A "+r+","+r+" 0 "+((a-o+360)%360<180?0:1)+","+(d.rotation===n?1:0)+" "+c+","+_;return b}function T(){var t=null;if(d.center_zero){if(Array.isArray(d.center_value)){if(d.center_value.includes(O()))return t}else if(O()===d.center_value)return t;h<180?t=Q(Math.min(h,v),v,d.track_radius):h>180&&(t=Q(g,Math.max(h,g),d.track_radius))}else t=Q(d.angle_min,h,d.track_radius);return t}function U(){if(d.track){var t=T();t&&((M=document.createElementNS(r,"path")).setAttributeNS(null,"d",t),M.setAttribute("stroke",""+d.track_color_init),M.setAttribute("stroke-width",""+d.track_width),M.setAttribute("fill","transparent"),M.setAttribute("stroke-linecap",d.linecap),M.setAttribute("class",d.class_track),l.appendChild(M))}}function W(){var t=Y(h),e=H(t,d.cursor_radius),r=H(t,d.cursor_radius+d.cursor_length);return"M "+e.x+","+e.y+" L "+r.x+","+r.y}function Z(){var t=T();t?M?M.setAttributeNS(null,"d",t):U():M&&M.setAttributeNS(null,"d",""),C||(C=O()!==d.default_value)&&M&&M.setAttribute("stroke",""+d.track_color),E&&(t=W())&&(E.setAttributeNS(null,"d",t),C&&E.setAttribute("stroke",""+d.cursor_color)),y&&(y.textContent=z())}return L(),P(),function(){(function(){if(!d.bg)return;(k=document.createElementNS(r,"circle")).setAttributeNS(null,"cx",""+i),k.setAttributeNS(null,"cy",""+u),k.setAttributeNS(null,"r",""+d.bg_radius),k.setAttribute("fill",""+d.bg_color),k.setAttribute("stroke",""+d.bg_border_color),k.setAttribute("stroke-width",""+d.bg_border_width),k.setAttribute("class",d.class_bg),l.appendChild(k)})(),function(){if(!d.track_bg)return;d.center_zero?((w=document.createElementNS(r,"path")).setAttributeNS(null,"d",Q(d.angle_min,v,d.track_bg_radius)),w.setAttribute("stroke",""+d.track_bg_color),w.setAttribute("stroke-width",""+d.track_bg_width),w.setAttribute("stroke-linecap",d.linecap),w.setAttribute("fill","transparent"),w.setAttribute("class",d.class_track_bg),l.appendChild(w),(x=document.createElementNS(r,"path")).setAttributeNS(null,"d",Q(g,d.angle_max,d.track_bg_radius)),x.setAttribute("stroke",""+d.track_bg_color),x.setAttribute("stroke-width",""+d.track_bg_width),x.setAttribute("stroke-linecap",d.linecap),x.setAttribute("fill","transparent"),x.setAttribute("class",d.class_track_bg),l.appendChild(x)):((A=document.createElementNS(r,"path")).setAttributeNS(null,"d",Q(d.angle_min,d.angle_max,d.track_bg_radius)),A.setAttribute("stroke",""+d.track_bg_color),A.setAttribute("stroke-width",""+d.track_bg_width),A.setAttribute("fill","transparent"),A.setAttribute("stroke-linecap",d.linecap),A.setAttribute("class",d.class_track_bg),l.appendChild(A))}(),function(){if(!d.markers)return;for(var t="",e=(d.angle_max-d.angle_min)/d.markers,n=d.angle_min;n<=d.angle_max;n+=e){var a=H(Y(n),d.markers_radius),o=H(Y(n),d.markers_radius+d.markers_length);t+="M "+a.x+","+a.y+" L "+o.x+","+o.y+" "}(D=document.createElementNS(r,"path")).setAttributeNS(null,"d",t),D.setAttribute("stroke",""+d.markers_color),D.setAttribute("stroke-width",""+d.markers_width),D.setAttribute("stroke-linecap",d.linecap),D.setAttribute("class",d.class_markers),l.appendChild(D)}(),U(),function(){if(!d.cursor)return;var t=W();t&&((E=document.createElementNS(r,"path")).setAttributeNS(null,"d",t),E.setAttribute("stroke",""+d.cursor_color_init),E.setAttribute("stroke-width",""+d.cursor_width),E.setAttribute("fill","transparent"),E.setAttribute("stroke-linecap",d.linecap),E.setAttribute("class",d.class_cursor),l.appendChild(E))}(),function(){if(!d.value_text)return;(y=document.createElementNS(r,"text")).setAttributeNS(null,"x",""+i),y.setAttributeNS(null,"y",""+d.value_position),y.setAttribute("text-anchor","middle"),y.setAttribute("cursor","default"),y.setAttribute("font-family",d.font_family),y.setAttribute("font-size",""+d.font_size),y.setAttribute("font-weight",""+d.font_weight),y.setAttribute("fill",d.font_color),y.setAttribute("class",d.class_value),y.textContent=z(),l.appendChild(y)}()}(),function(){l.addEventListener("mousedown",function(t){!function(t){t.preventDefault(),S=l.getBoundingClientRect(),f=S.width/2,m=f,document.addEventListener("mousemove",V,!1),document.addEventListener("mouseup",X,!1),R(t),Z()}(t)}),l.addEventListener("wheel",function(t){!function(t){t.preventDefault();var e=t.deltaY;0!==e&&(N>Math.abs(e)||!N)&&(N=Math.abs(e));return r=e/N*p*d.mouse_wheel_acceleration,I(Math.min(Math.max(h+r,d.angle_min),d.angle_max),!0),Z(),!1;var r}(t)}),l.addEventListener("touchstart",q,{passive:!1})}(),{set value(t){B(t),Z()},set config(t){d=Object.assign({},s,d,t),L(),Z()},setConfigValue:function(t,e){d[t]=e,L(),Z()},initValue:P,enableDebug:function(){!0},disableDebug:function(){!1}}};var n,a=r(0),o=(n=a)&&n.__esModule?n:{default:n}}])});